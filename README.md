# Helper Bot

Телеграм-бот, интегрированный с облачной AI-моделью (DeepSeek, OpenRouter и др.).
Поддерживает бесконечный диалог с сохранением контекста, автоматической суммаризацией старых сообщений и оптимизацией длины промпта.

## Возможности

1. Ведение постоянного диалога с пользователем

2. Хранение полной истории сообщений в SQLite

3. Автоматическое сжатие слишком длинных чатов

4. Контекстный промпт, который передается в модель при каждом запросе

5. Простая интеграция с OpenRouter API

6. Структурированный промпт ассистента


## Установка и запуск

### Клонируй репозиторий:

```bash
git clone https://github.com/MaminAmetist/helper_bot
cd helper_bot
```

### Создай виртуальное окружение:

```bash
python -m venv venv
source venv/bin/activate    # Linux / Mac
venv\Scripts\activate       # Windows
```

### Установи зависимости:

```bash
pip install -r requirements.txt
```

### Создай файл .env и укажи ключи:

```.env
BOT_TOKEN=токен_телеграм_бота
AI_API_KEY=ключ_OpenRouter
MODEL_NAME=имя модели
```

### Запусти бота:

```bash
python bot.py
```

## Как работает контекст

1. Все сообщения сохраняются в SQLite.

2. При обращении к модели собирается контекст:

   - системные summary-сообщения

   - последние сообщения пользователя и ассистента

3. Если история слишком большая, то старый кусок суммируется и заменяется одним системным сообщением.  Модель получает короткий, оптимизированный промпт и формирует ответ.

## Настройка модели

Можно заменить модель на любую, поддерживаемую OpenRouter, изменив переменные MODEL_NAME и AI_API_KEY.

